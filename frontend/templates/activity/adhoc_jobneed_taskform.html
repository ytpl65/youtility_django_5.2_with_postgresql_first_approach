{% extends "globals/base_form.html" %}

<!---- BEGIN PAGE TITLE ---->
{% block title %}
People Form
{% endblock title %}
<!---- END PAGE TITLE ----->

<!--- START CSS -->
{% block extra_css %}
<link  href="{{ static('assets/plugins/custom/DataTables/datatables.min.css') }}" rel="stylesheet" type="text/css"/>
{{ adhoctaskform.media.css }}
{% endblock extra_css %}
<!--- END CSS -->

<!-------------------------- BEGIN PAGE BREADCUMB ----------------------->
{% block pagebreadcumb %}
{{ super() }}
<li class="breadcrumb-item pe-3"><a href="{{ url('activity:adhoctasks') }}?template=true" class="pe-3">Adhoc Task List</a></li>
<li class="breadcrumb-item pe-3"><a href="javascript:void(0)" class="pe-3">Adhoc Task Form</a></li>
{% endblock pagebreadcumb %}
<!-------------------------- END PAGE BREADCUMB ------------------------->


<!------ BEGIN FORM TITLE ------>
{% block form_title %}
Adhoc Task
{% endblock form_title %}
<!------ END FORM TITLE -------->

{% block form %}
<input type="hidden" name="{{ adhoctaskform.ctzoffset.name }}" id = "{{ adhoctaskform.ctzoffset.auto_id }}" value="-1">
<div class="row">
    <div class="col-md-6">
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.jobdesc.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.jobdesc }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.asset.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.asset }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.qset.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.qset }}
            </div>
        </div>
        <!--ASSIGNTO-->
        <div class="input-group mb-3">
            <div class="col-md-4">
                <label for='{{ adhoctaskform.assign_to.id_for_label }}'
                class="required">{{ adhoctaskform.assign_to.label }}:</label>
            </div>
            <div class="col-md-2 form-check form-check-inline">
                <input type="radio" class="form-check-input" name='{{ adhoctaskform.assign_to.name }}'
                    id="{{ adhoctaskform.assign_to.auto_id }}1" value="PEOPLE" checked
                    onchange="showHideSelectField('PEOPLE')">
                <label class="form-check-label" for="{{ adhoctaskform.assign_to.auto_id }}">People</label>
            </div>
            <div class="col-md-2 form-check form-check-inline">
                <input type="radio" class="form-check-input" name='{{ adhoctaskform.assign_to.name }}'
                    id="{{ adhoctaskform.assign_to.auto_id }}1" value="GROUP" checked
                    onchange="showHideSelectField('GROUP')">
                <label class="form-check-label" for="{{ adhoctaskform.assign_to.auto_id }}">Group</label>
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4 people">
                {{ adhoctaskform.people.label_tag() }}
            </div>
            <div class="col-md-8 people">
                {{ adhoctaskform.people }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4 pgroup">
                {{ adhoctaskform.pgroup.label_tag() }}
            </div>
            <div class="col-md-8 pgroup">
                {{ adhoctaskform.pgroup }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.jobstatus.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.jobstatus }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.scantype.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.scantype }}
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.plandatetime.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.plandatetime }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.expirydatetime.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.expirydatetime }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.gracetime.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.gracetime }}   
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.starttime.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.starttime }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.endtime.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.endtime }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.performedby.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.performedby }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.ticketcategory.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.ticketcategory }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.gpslocation.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.gpslocation }}
            </div>
        </div>
        <div class="input-group mb-3">
            <div class="col-md-4">
                {{ adhoctaskform.multifactor.label_tag() }}
            </div>
            <div class="col-md-8">
                {{ adhoctaskform.multifactor }}
            </div>
        </div>
    </div>
</div>
{% endblock form %}

{% block extras %}
<div class="card">
    <div class="card-header">
        <div class="card-title">
            Task Details&nbsp;<i class="fas text-white fa-table ch4"></i>
        </div>
    </div>
    <div class="card-body">
        <table id='taskdetails' class="display cell-border compact hover" style="width:100%">
            <thead>
                <th>SNo</th>
                <th>Question</th>
                <th>Question Type</th>
                <th>Min</th>
                <th>Max</th>
                <th>Option</th>
                <th>Alert On</th>
                <th>Answer</th>
                <th>Alert</th>
                <th>Mandatory</th>
            </thead>
            <tbody>
                {% if taskdetails is defined %}
                    {% for detail in taskdetails %}
                        <tr>
                            <td>{{ detail['seqno'] }}</td>
                            <td>{{ detail['question__quesname'] }}</td>
                            <td>{{ detail['question__answertype'] }}</td>
                            <td>{{ detail['min'] }}</td>
                            <td>{{ detail['max'] }}</td>
                            <td>{{ detail['max'] }}</td>
                            <td>{{ detail['options'] }}</td>
                            <td>{{ detail['alerton'] }}</td>
                            <td>{{ detail['answer'] }}</td>
                            <td>{{ detail['ismandatory'] }}</td>
                        </tr>
                    {% endfor %}
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock extras %}

{% block extra_scripts %}
{{ adhoctaskform.media.js }}
<script src="{{ static('assets/plugins/custom/DataTables/datatables.min.js') }}" type="text/javascript"></script>
<script>
    function showHideSelectField(val) {
        if (val == "PEOPLE") {
            //$("#aatopdiv").show();
            $(".people").show();
            $(".pgroup").hide();
        } else {
            //$("#aatopdiv").hide();
            $(".pgroup").show();
            $(".people").hide();
        }
    }
$(document).ready(function () {
    //set ctzoffset
  	$("#id_ctzoffset").val(-new Date().getTimezoneOffset())
    
    $('#taskdetails').DataTable({
        responsive:true,
        dom       : `<'row' <'col-sm-6 d-flex justify-content-start'f> <'col-sm-6 d-flex justify-content-end'B> >rt<'row'
			 <'col-sm-6'l> <'col-sm-6'p><'col-sm-12 d-flex justify-content-center'i>>`,
        buttons:[],
        searching:false
    })
})
</script>
{% endblock extra_scripts %}

